---
layout:     post
title:      cpp类
subtitle:   
date:       2023-12-14
author:     Pan Wang
header-img: img/green-bg.jpg
catalog: true
tags:
    - cpp类
    - 继承与派生
    - 构造函数
    - 析构函数
    - 虚继承与虚基类
---

# cpp类

## 类的定义

+ 类和结构体这种，都可以看成一个变量，都需要在结尾加上“；”，而函数则不一样，可以不用。
+ 通常来说，类的成员变量应该设置为private，而需要暴露的接口才设置为public。
+ 尽量只在类的内部声明成员函数，而在外部定义具体的函数，需要加上类的限定符。
+ 在类内部定义的函数会自动转为inline函数，也就是会将函数体给展开。
+ public类型是可以被类外对象访问的，但是private得成员只能是在类内部访问；protect成员也不能在外部被访问，但可以被派生类访问。

## 类的继承与派生

+ 类的内部成员变量&函数有public & private之分，而类的继承也有区分。
+ 基类成员在派生类中的访问权限不得高于继承方式中指定的权限，private成员在派生类中都无法使用，只能通过设置public或者protect的成员函数来访问。
+ 多重继承的时候，构造函数的调用顺序和声明派生类构造函数时出现顺序一致。

## 构造函数与析构函数

+ 构造函数是每个类都有的，没有显示定义的话就会生成默认构造函数；其作用是用来初始化成员变量的。
+ 构造函数没有返回值，且和类名一样，采用初始化列表进行会更好，省去了代码行数。
+ 派生类的构造函数可以调用基类的。
+ 析构函数是不用在派生类中显示调用，因为析构顺序是和构造函数反着的。

## 虚继承与虚基类

+ 虚继承是为了解决多重继承容易出现的命名冲突的情况，通常来说我们只需要在继承方式前面加上virtual就表明是虚继承。
+ 直接基类对间接基类是虚继承的，而在派生类中只会有一份间接基类的成员变量和函数。
+ 虚基类的构造函数需要被派生类直接调用，这和普通的继承方式不一样；并且间接基类（虚基类）是首先被调用的。

## 类之间的向上转型

+ 只能将派生类的对象赋值给基类对象，反过来不行；因为有些派生类成员，基类都没有。
+ 概括起来说就是：编译器通过指针来访问成员变量，指针指向哪个对象就使用哪个对象的数据；编译器通过指针的类型来访问成员函数，指针属于哪个类的类型就使用哪个类的函数。
